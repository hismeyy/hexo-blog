---
title: MySQL-基础
date: 2022-12-28
description: 最近在公司里面写SQL遇到很多问题，所以重新复习一遍SQL语言
keywords: MySQL
tags: 
	- MySQL
	- 基础
	- 数据库
categories: java相关
---

# 一、SQL概述
## 1、为什么要使用数据库
- 持久化： 把数据保存到可掉电式存储设备中以供之后使用。大多数情况下，特别是企 业级应用，数据持久化意味着将内存中的数据保存到硬盘上加以”固化”，而持久化的实现过程大多 通过各种关系数据库来完成。  
- 持久化的主要作用： 将内存中的数据存储在关系型数据库中，当然也可以存储在磁盘文件、XML数 据文件中。  

## 2、数据库与数据库管理系统
### 2.1 数据库的相关概念
DB：**数据库（Database）**
- 即存储数据的“仓库”，其本质是一个文件系统。它保存了一系列有组织的数据。
    DBMS：**数据库管理系统（Database Management System）**
- 是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，对数据库进行统一管理和控 制。用户通过数据库管理系统访问数据库中表内的数据。
    SQL：**结构化查询语言（Structured Query Language）**
- 专门用来与数据库通信的语言。

### 2.2 数据库与数据库管理系统的关系
数据库管理系统(DBMS)可以管理多个数据库，一般开发人员会针对每一个应用创建一个数据库。为保存 应用中实体的数据，一般会在数据库创建多个表，以保存程序中实体用户的数据。

## 3、常见数据库排名
<a href="https://db-engines.com/en/ranking">数据库排名链接</a>

## 4、MySQL的优点
为什么如此多的厂商要选用MySQL？大概总结的原因主要有以下几点：
1. 开放源代码，使用成本低。
2. 性能卓越，服务稳定。
3. 软件体积小，使用简单，并且易于维护。
4. 历史悠久，社区用户非常活跃，遇到问题可以寻求帮助。
5. 许多互联网公司在用，经过了时间的验证。  

## 5、关系型数据库和非关系型数据库
**关系型数据库（RDBMS）**

这种类型的数据库是 **最古老** 的数据库类型，关系型数据库模型是把复杂的数据结构归结为简单的二元关系（即二维表格形式）。

**优势**

- 复杂查询：**可以用SQL语句方便的在一个表以及多个表之间做非常复杂的数据查询。**
- 事务支持：**使得对于安全性能很高的数据访问要求得以实现。**  

**非关系型数据库（非RDBMS）**

可看成传统关系型数据库的功能 阉割版本 ，基于键值对存储数据，不需要经过SQL层 的解析， 性能非常高 。同时，通过减少不常用的功能，进一步提高性能。  

1. 键值型数据库
   内存缓存Redis
2. 文档型数据库
   XML、JSON
3. 搜索引擎数据库
   Solr、Elasticsearch、Splunk
4. 列式数据库
   HBase
5. 图形数据库
   Neo4J、InfoGrid

# 二、基本的SELECT语句
## 1、SQL分类

SQL语言在功能上主要分为如下3大类

1. DDL（Data Definition Languages、数据定义语言）

   这些语句定义了不同的数据库、表、视图、索 引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构。

2. DML（Data Manipulation Language、数据操作语言）

   用于添加、删除、更新和查询数据库记 录，并检查数据完整性。

3. DCL（Data Control Language、数据控制语言）

   用于定义数据库、表、字段、用户的访问权限和 安全级别。

## 2、注释

```sql
单行注释:#注释文字(MySQL特有的方式)
单行注释:-- 注释文字(--后面必须包含一个空格。)
多行注释:/* 注释文字 */
```

## 3、数据导入指令

```mysql
mysql> source 数据库sql文件路径
```

## 4、基本的SELECT语句

### 4.0 SELECT...

### 4.1 SELECT...FROM

```mysql
SELECT  列
FROM	表
```

### 4.2 列的别名

在列名和别名之间加入关键字**AS**，可以省略

### 4.3 去重

在SELECT语句中使用关键字**DISTINCT**去除重复行

```mysql
SELECT DISTINCT 列
FROM 表
```

### 4.4  空值参与运算

1. 所有运算符或列值遇到null值，运算的结果都为null

### 4.5 着重号

保证表中的字段、表名等没有和保留字、数据库系统或常用方法冲突。如果真的相同，请在 SQL语句中使用一对``**（着重号）**引起来。

## 5、显示表结构

使用**DESCRIBE** 或 **DESC** 命令，表示表结构。

```sql
DESCRIBE 表;
或
DESC 表;
```

各个字段的含义分别解释：

- Field：表示字段名称
- Type：表示字段类型 
- Null：表示该列是否可以存储NULL值
-  Key：表示该列是否已编制索引，PRI表示该列是表主键的一部分；UNI表示该列是UNIQUE索引的一 部分，MUL表示在列中某个给定值允许出现多次。
-  Default：表示该列是否有默认值，如果有，那么值是多少。
- Extra：表示可以获取的与给定列有关的附加信息

## 6、WHERE过滤

```sql
SELECT 字段1,字段2
FROM 表名
WHERE 过滤条件
```

# 三、 运算符
## 1、算术运算符
算术运算符主要用于数学运算，其可以连接运算符前后的两个数值或表达式，对数值或表达式进行加（+）、减（-）、乘（*）、除（/）和取模（%）运算。

> 加法和减法的注意
> 一个整数类型的值对整数进行加法和减法操作，结果还是一个整数； 
> 一个整数类型的值对浮点数进行加法和减法操作，结果是一个浮点数； 
> 加法和减法的优先级相同，进行先加后减操作与进行先减后加操作的结果是一样的； 
> 在Java中，+的左右两边如果有字符串，那么表示字符串的拼接。但是在MySQL中+只表示数 
> 值相加。如果遇到非数值类型，先尝试转成数值，如果转失败，就按0计算。（补充：MySQL 中字符串拼接要使用字符串函数CONCAT()实现）

> 乘法和除法的注意
> 一个数乘以整数1和除以整数1后仍得原数； 
> 一个数乘以浮点数1和除以浮点数1后变成浮点数，数值与原数相等； 
> 一个数除以整数后，不管是否能除尽，结果都为一个浮点数； 
> 一个数除以另一个数，除不尽时，结果为一个浮点数，并保留到小数点后4位； 
> 乘法和除法的优先级相同，进行先乘后除操作与先除后乘操作，得出的结果相同。 
> 在数学运算中，0不能用作除数，在MySQL中，一个数除以0为NULL。

## 2、比较运算符
比较运算符用来对表达式左边的操作数和右边的操作数进行比较，比较的结果为真则返回1，比较的结果为假则返回0，其他情况则返回NULL。

| 运算符     | 名称      |
|---------|---------|
| \=      | 等于运算符   |
| \<=>    | 安全等于运算符 |
| \<>(!=) | 不等于运算符  |
| \<      | 小于运算符   |
| \<=     | 小于等于运算符 |
| \>      | 大于运算符   |
| \>=     | 大于等于运算符 |

| 运算符         | 名称       | 意义                   |
|-------------|----------|----------------------|
| IS NOT NULL | 不为空运算符   | 判断值，字符串或表达式是否不为空     |
| LEAST       | 最小值运算符   | 在多个值中返回最小值           |
| GREATEST    | 最大值运算符   | 在多个值中返回最大值           |
| BETWEEN AND | 两值之间的运算符 | 判断一个值是否在两个值之间        |
| IS NULL     | 为空运算符    | 判断一个值，字符串或表达式是否为空    |
| IN          | 属于运算符    | 判断一个值是否为列表中的任意一个值    |
| NOT IN      | 不属于运算符   | 判断一个值是否不是一个列表中的任意一个值 |
| LIKE        | 模糊匹配运算符  | 判断一个值是否符合模糊匹配        |
| REGEXP      | 正则表达式运算符 | 判断一个值是否符合正则表达规则      |
| RLIKE       | 正则表达式运算符 | 判断一个值是否符合正则表达规则      |

## 3、逻辑运算符
| 运算符 | 作用      |
|-----|---------|
| NOT | 等于运算符   |
| AND | 安全等于运算符 |
| OR  | 逻辑或     |
| XOR | 逻辑异或    |

# 四、排序与分页
## 1、数据排序
使用ORDER BY子句进行排序
- ASC（ascend）: 升序
- DESC（descend）:降序
1. 单列排序
    ```mysql
    ORDER BY 字段 排序规则
    ```
2. 多列排序
    ```mysql
    ORDER BY 字段, 字段 排序规则
    ```
    
注意：
1. 可以使用不在SELECT列表中的列排序。
2. 在对多列进行排序的时候，首先排序的第一列必须有相同的列值，才会对第二列进行排序。如果第 一列数据中所有值都是唯一的，将不再对第二列进行排序。

## 2、分页
1. MySQL中使用 LIMIT 实现分页
    ```mysql
    LIMIT [位置偏移量,] 行数
    ```

2. 分页显式公式：
   ```mysql
   SELECT * FROM 表
   LIMIT (PageNo - 1) * PageSize, PageSize;
   ```

3. 注意：
   LIMIT 子句必须放在整个SELECT语句的最后！