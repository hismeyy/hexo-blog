<!DOCTYPE html>
<html lang="zh_CN">

	<head>
		<meta charset="utf-8" />
		<title>个人信息管理系统 | 注册</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
		<meta content="Beethemesdesign" name="author" />

		<!-- favicon -->
		<link rel="shortcut icon" href="../assets/images/me.png">


		<!-- Required css -->
		<link href="../assets/css/icons.min.css" rel="stylesheet" type="text/css" />
		<link href="../assets/css/style.css" rel="stylesheet" type="text/css" />


	</head>

	<body class="">

		<div class="account-pages mt-5 mb-1">
			<div class="container">
				<div class="row justify-content-center">
					<div class="col-lg-5">
						<div class="card mb-0">


							<div class="card-body p-4">
								<div class="text-center w-75 m-auto">
									<h4 class="text-dark-50 text-center mt-0 font-weight-bold">免费注册</h4>
									<p class="text-muted mb-4">还没有账户吗？快去创建一个账户吧！</p>
								</div>

								<form id="form-reg" action="#">

									<div class="form-group">
										<label for="fullname">昵称</label>
										<input name="username" class="form-control" type="text" id="fullname"
											placeholder="请输入你的昵称" required>
									</div>

									<div class="form-group">
										<label for="emailaddress">邮箱地址</label>
										<input name="email" class="form-control" type="email" id="emailaddress" required
											placeholder="请输入你的邮箱地址">
									</div>

									<div class="form-group">
										<label for="password">密码</label>
										<input name="password" class="form-control" type="text" required
											id="password" placeholder="请输入你的密码">
									</div>



									<div class="row justify-content-center">
										<div class="col-8">
											<div class="form-group mb-0">
												<button id="but-reg" class="btn btn-primary btn-block" type="button"> 注 册 </button>
											</div>
										</div>
									</div>

								</form>
								<div class="row mt-3">
									<div class="col-12 text-center">
										<p class="text-muted">已有账户? <a href="login.html"
												class="text-muted ml-1"><b>登录</b></a></p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- end container -->
		</div>
		<!-- end page -->

		<!-- Required js -->
		<script src="../assets/js/app.js"></script>
		<script>
			$("#but-reg").click(function(){
				$.ajax({
				    url: "/users/reg-user",
				    type: "POST",
				    data: $("#form-reg").serialize(),
				    dataType: "JSON",
				    success: function(json) {
				        if(json.state == 200){
							alert("注册成功，请前往邮箱激活！")
							location.href = "login.html"
						} else if( json.state == 4000){
							alert("邮箱被占用")
						} else{
							alert("注册失败")
						}
				    },
				    error: function(xhr) {
				        alert("注册时发生未知异常" + xhr.message)
				    }
				});
			})
		</script>

	</body>

</html>
